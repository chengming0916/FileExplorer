<UserControl x:Class="FileExplorer.Views.FileListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:cal="http://www.caliburnproject.org"
             xmlns:uc="clr-namespace:FileExplorer.UserControls"
             xmlns:m="clr-namespace:FileExplorer.Models"
             mc:Ignorable="d" 
             
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/FileExplorer3;component/Themes/Default/Brushes.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <DataTemplate x:Key="DefaultEntryTemplate">
                <TextBlock Text="{Binding EntryModel.Label}"></TextBlock>
            </DataTemplate>
            
            <Style x:Key="ItemContainerStyleBase" TargetType="{x:Type ListViewItem}" >
                <Setter Property="SnapsToDevicePixels" Value="true"/>
                <Setter Property="OverridesDefaultStyle" Value="true"/>
                <Setter Property="TextSearch.Text" Value="{Binding EmbeddedModel.Label, Mode=OneWay}" />
                <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <Border Name="Border" Padding="2" SnapsToDevicePixels="true"                             
                            BorderThickness="1"
                            BorderBrush="Transparent"
                            Background="Transparent">
                                <ContentPresenter 
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="uc:SelectionHelper.IsDragging" Value="true">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource HotTrackBrush}"/>
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DisabledBorderBrush}"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource HotTrackBrush}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="true">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource SelectedBackgroundBrush}"/>
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource LightBorderBrush}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter Property="Foreground" 
                                        Value="{StaticResource DisabledForegroundBrush}"/>
                                </Trigger>
                                <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                    <BeginStoryboard>
                                        <Storyboard Storyboard.Target="{Binding}">
                                            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0.5" To="1" Duration="0:0:1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>

                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="DefaultItemContainerStyle" TargetType="{x:Type ListViewItem}"
                   BasedOn="{StaticResource ItemContainerStyleBase}">
            </Style>
            
        </ResourceDictionary>
    </UserControl.Resources>
    <StackPanel>
        <Button x:Name="Load" cal:View.Context="{Binding Items}">Load</Button>
        <Grid>
            <ListView Grid.Row="0" x:Name="Items"  Background="LightBlue">
                <!--<ListView.ItemTemplate>                    
                    <DataTemplate>
                        <TextBlock Text="{Binding EntryModel.Label}"></TextBlock>
                    </DataTemplate>
                </ListView.ItemTemplate>-->

            </ListView>

            <TextBlock x:Name="BusyIndicator" >Busy</TextBlock>
        </Grid>
    </StackPanel>
</UserControl>
